"use strict";var p=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var C=(t,e)=>{for(var n in e)p(t,n,{get:e[n],enumerable:!0})},m=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of $(e))!h.call(t,r)&&r!==n&&p(t,r,{get:()=>e[r],enumerable:!(o=a(e,r))||o.enumerable});return t};var S=t=>m(p({},"__esModule",{value:!0}),t);var L={};C(L,{toObj:()=>w,toStr:()=>g});module.exports=S(L);var s=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&apos;"]];function b(t){return t.replace(/\r\n/g,`
`)}function x(t){return t.replace(/^\<|[\s!?/]*\>$/g,"").replace(/\s+/g," ").trim()}function y(t,e){for(let n=t.length-1;n>=0;n--)if(e(t[n],n,t))return n;return-1}function d(t){return encodeURIComponent(t)}function I(t){for(let e=0;e<s.length;e++)t=t.replace(new RegExp(s[e][0],"g"),s[e][1]);return t}function T(t){for(let e=s.length-1;e>=0;e--)t=t.replace(new RegExp(s[e][1],"g"),s[e][0]);return t}function R(t){return t.replace(/<!--([\s\S]*?)-->/g,function(...e){return`<!-->${d(e[1])}</!-->`})}function j(t){return t.replace(/(<script(?:[\s\S]*?)>)([\s\S]*?)(<\/script>)/g,function(...e){return`${e[1]}${d(e[2])}${e[3]}`})}function E(t){return t.replace(/(>)([\s\S]*?)(<)/g,function(...e){return`${e[1]}${I(e[2])}${e[3]}`})}function O(t){function e(...n){return`=${d(n[1])} `}return t.replace(/\="([^"]*?)"/g,e).replace(/\='([^']*?)'/g,e)}function U(t){let e=x(t).split(/\s/),n={};n.tag=e[0]||"",n.closer=null,n.attributes={},n.children=[],n.isClosing=/^\//.test(n.tag),n.isClosed=n.isClosing,n.tag=n.tag.replace(/^\//,"");for(let o=1;o<e.length;o++){let[r,c]=e[o].split("=");r.length>0&&(typeof c=="string"&&c.length>0?n.attributes[r]=decodeURIComponent(c):n.attributes[r]=!0)}return n}function w(t){t=O(E(j(R(b(t)))));let e=0,n=/<[^>]*?>/g,o,r=[],c=[];for(;o=n.exec(t);){let i=t.substring(e,o.index).trim();i.length>0&&r.push(T(i));let f=U(o[0]);if(!f.isClosing)r.push(f),c.push(f);else{let l=y(r,function(u){return!u.isClosed&&u.tag===f.tag});if(l>-1&&(r[l].isClosed=!0,r[l].children=r.splice(l+1,r.length-l+1),["script","!--"].indexOf(r[l].tag)>-1))for(let u=0;u<r[l].children.length;u++)typeof r[l].children[u]=="string"&&(r[l].children[u]=decodeURIComponent(r[l].children[u]))}e=n.lastIndex}for(let i of c)i.tag.toUpperCase()==="!DOCTYPE"?i.closer="":i.tag.toLowerCase()==="?xml"?i.closer="?":i.tag==="!--"?i.closer="--":i.isClosed||(i.closer=" /"),delete i.isClosed,delete i.isClosing;return r}function F(t){let e="";for(let[n,o]of Object.entries(t))typeof o=="string"?e+=` ${n}="${o}"`:o===!0&&(e+=` ${n}`);return e}function g(t){if(typeof t=="string")return t;let{tag:e,closer:n,attributes:o,children:r}=t,c=`<${e}${F(o||{})}`;if(typeof n!="string"&&(c+=">"),Array.isArray(r))for(let i of r)c+=g(i);return typeof n=="string"?c+=`${n}>`:c+=`</${e}>`,c}0&&(module.exports={toObj,toStr});
